{"version":3,"sources":["webpack:///./src/assets/images/take_photo@2x.png","webpack:///src/components/ChoosePhoto.vue","webpack:///./src/components/ChoosePhoto.vue?501c","webpack:///./src/components/ChoosePhoto.vue","webpack:///./src/common/wechat.js","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["module","exports","__webpack_require__","p","ChoosePhoto","name","data","mounted","beforeRouteEnter","to","from","next","vm","console","log","initWechatJsex","methods","this","axios","post","then","res","code","wechatSign","Object","utils","wechat","appId","nonce","timestamp","signature","catch","response","openAlbum","type","that","localIds","window","localStorage","setItem","$router","push","components_ChoosePhoto","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","on","click","$event","staticRenderFns","attrs","src","Component","normalizeComponent","ssrContext","__webpack_exports__","initWechatJs","nonceStr","router","link","imgUrl","wx","config","debug","jsApiList","ready","onMenuShareTimeline","title","success","cancel","alert","onMenuShareAppMessage","desc","fail","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","error","openCameraForPic","uploadCallback","sourceType","chooseImage","count","sizeType","e","default","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"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","file":"static/js/3.16879c4f4bad78451f74.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/take_photo@2x.53ef2c3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/take_photo@2x.png\n// module id = 3wg7\n// module chunks = 3","<template>\n  <div class=\"choose-container\">\n    <!-- <div class=\"choose-bg\">\n      <img src=\"../assets/images/page_bg@2x.jpg\" />\n    </div> -->\n    <div class=\"logo-img\"><img src=\"../assets/images/logo@2x.png\" /></div>\n    <div class=\"camera-img\"><img src=\"../assets/images/take_photo@2x.png\" /></div>\n    <div class=\"choose-button\">\n      <div @click=\"openAlbum(1)\" class=\"btn-div\">上传照片</div>\n      <div @click=\"openAlbum(2)\" class=\"btn-div\">摄像头</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {openCameraForPic, initWechatJs} from '../common/wechat'\nimport { _parseJSON } from '../common/utils'\nexport default {\n  name: 'ChoosePhoto',\n  data () {\n    return {\n    }\n  },\n  mounted () {\n  },\n  beforeRouteEnter (to, from, next) {\n    next(vm => {\n      console.log('ChoosePhoto activited')\n      vm.initWechatJsex()\n    })\n  },\n  methods: {\n    initWechatJsex () {\n      this.axios.post('http://coach.realmshow.com/api/webchat-api/pub/signature').then((res) => {\n        if (res.data.code === 200) {\n          var wechatSign = _parseJSON(res.data.data)\n          console.log(wechatSign)\n          initWechatJs(wechatSign.appId, wechatSign.nonce, wechatSign.timestamp, wechatSign.signature)\n        }\n      }).catch((response) => {\n        console.log(response)\n      })\n    },\n    openAlbum (type) {\n      var that = this\n      console.log('openAlbum')\n      openCameraForPic(type, function (localIds) {\n        console.log(localIds[0])\n        window.localStorage.setItem('localIds', (localIds[0]))\n        that.$router.push('/choosealbum')\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.choose-container {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-image: url(../assets/images/page_bg@2x.jpg);\n  background-repeat: no-repeat;\n  background-position: center;\n  left: 50%;\n  transform: translateX(-50%);\n  background-size: cover;\n//   .choose-bg {\n//     position: relative;\n//     width: 100%;\n//     height: 100%;\n//     z-index: -999;\n//     img {\n//       width: 100%;\n//       height: 100%;\n//     }\n//   }\n  .logo-img {\n    position: absolute;\n    top: 3rem;\n    text-align: center;\n    width: 100%;\n    img {\n      width: 150px;\n    }\n  }\n  .camera-img {\n    position: absolute;\n    top: 180px;\n    text-align: center;\n    width: 100%;\n    img {\n      width: 150px;\n    }\n  }\n  .choose-button {\n    position: absolute;\n    bottom: 100px;\n    text-align: center;\n    width: 100%;\n    .btn-div {\n      width: 160px;\n      height: 50px;\n      line-height: 50px;\n      font-size: 20px;\n      text-align: center;\n      background: #000;\n      color: #fff;\n      padding: 0 15px;\n      box-sizing: border-box;\n      margin: 0 auto;\n      border-radius: 50px;\n    }\n    :first-child {\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChoosePhoto.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"choose-container\"},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"choose-button\"},[_c('div',{staticClass:\"btn-div\",on:{\"click\":function($event){return _vm.openAlbum(1)}}},[_vm._v(\"上传照片\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn-div\",on:{\"click\":function($event){return _vm.openAlbum(2)}}},[_vm._v(\"摄像头\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"logo-img\"},[_c('img',{attrs:{\"src\":require(\"../assets/images/logo@2x.png\")}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"camera-img\"},[_c('img',{attrs:{\"src\":require(\"../assets/images/take_photo@2x.png\")}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18e0192b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChoosePhoto.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18e0192b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChoosePhoto.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChoosePhoto.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChoosePhoto.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18e0192b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChoosePhoto.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-18e0192b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChoosePhoto.vue\n// module id = null\n// module chunks = ","// 微信相关的方法\n//const wx = window.wx || {};\n\nimport wx from \"weixin-js-sdk\";\n//var isLogin = false;\nexport const initWechatJs = (\n  appId,\n  nonceStr,\n  timestamp,\n  signature,\n  router,\n  link,\n  imgUrl\n) => {\n  wx.config({\n    debug: false,\n    appId: appId,\n    timestamp: timestamp,\n    nonceStr: nonceStr,\n    signature: signature,\n    jsApiList: [\n      \"checkJsApi\",\n      \"chooseImage\",\n      \"uploadImage\",\n      \"onMenuShareTimeline\",\n      \"getLocalImgData\",\n      \"onMenuShareAppMessage\",\n    ]\n  });\n  wx.ready(function() {\n    wx.onMenuShareTimeline({\n      title: \"COACH和任嘉伦一起表爱意\", // 分享时的标题\n      link: link, // 分享时的链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n      imgUrl: imgUrl, // 分享时显示的图标\n      success: function() {\n        console.log();\n      },\n      cancel: function() {\n        alert(\"取消分享\");\n      }\n    });\n    wx.onMenuShareAppMessage({\n      title: \"COACH和任嘉伦一起表爱意\", // 分享标题\n      desc: \"COACH腕表和任嘉伦一起表爱意。\", // 分享描述\n      link: link, // 分享链接\n      imgUrl: imgUrl, // 分享图片\n      success: function success(res) {\n        // alert('已分享');\n        // alert(uuu);\n      },\n      cancel: function cancel(res) {\n        //alert('已取消');\n      },\n      fail: function fail(res) {\n        alert(JSON.stringify(res));\n      }\n    });\n  });\n  wx.error(function(res) {\n    alert(\"微信验证失败\");\n  });\n};\n\nexport const openCameraForPic = function(type, uploadCallback) {\n  var sourceType = [];\n  if (type === 1) {\n    sourceType.push(\"album\");\n  } else {\n    sourceType.push(\"camera\");\n  }\n  wx.chooseImage({\n    count: 1, // 默认9\n    sizeType: [\"original\", \"compressed\"], // 可以指定是原图还是压缩图，默认二者都有\n    sourceType: sourceType, // 可以指定来源是相册还是相机，默认二者都有\n    success: function(res) {\n      var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片\n      console.log(localIds);\n      if (uploadCallback && typeof uploadCallback === \"function\") {\n        uploadCallback(localIds);\n      }\n    },\n    error: function(e) {\n      alert(e);\n    }\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/wechat.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 2 3","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 2 3"],"sourceRoot":""}